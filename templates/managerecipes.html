{% extends 'base.html' %}
{% block document %}
  <title>Manage Your Recipes | OneTwoCook</title>
  <div class="background responsive-img">
    <div class="container">
      <div class="card-panel managerecipe-border">
        <div class="row">
          <div class="col s12">
            <div class="card-content">
              <h2 class="center">Manage Your Recipes</h2>
                <h5 class="center">Recipes created by you: <b>{{user_recipe_count}}</b></h5>
              <p class="center">Below are the recipes that you have created on this website</p>
              {% if user_recipes %}
                {% for recipe in user_recipes %}
                    <div class="col s12 m6 l6">
                      <div class="card">
                        <div class="card-image waves-effect waves-block">
                          <a href="{{url_for('load_recipe', recipe_name = recipe.recipe_name)}}">
                            <img class="responsive-img" src="../../static/images/{{recipe.img_path | default('placeholder_image.png')}}" alt={{recipe.recipe_name}} >
                          </a>
                        </div>
                        <div class="card-content">
                          <span class="card-title activator grey-text text-darken-4"><i class="material-icons right">more_vert</i></span>
                          <a class="link" href="{{url_for('load_recipe', recipe_name = recipe.recipe_name)}}">
                            <h5 class="truncate">{{recipe.recipe_name}}</h5>
                          </a>
                        </div>
                        <div class="card-reveal">
                          <span class="card-title grey-text text-darken-4">
                            <i class="material-icons right">close</i>
                            <h4>{{recipe.recipe_name}}</h4>
                            <hr>
                          </span>
                          <p>{{recipe.recipe_summary}}</p>
                          <div class="col-12">
                            <a href="{{url_for('edit_recipe', recipe_id = recipe._id)}}" class="btn halfway-fab waves-effect grey lighten-2">Edit<i class="material-icons">edit</i></a>
                            <a href="{{url_for('delete_recipe', recipe_id = recipe._id)}}" class="btn halfway-fab waves-effect waves-light red">Delete<i class="material-icons">delete</i></a>
                          </div>
                        </div>
                      </div>
                    </div>
                    {% else %}
                      <p class="text"><b>{{ session['username'] }}, you have not yet created any recipes.</b></p>
                      <p class="text"><a href="{{url_for('add_recipe')}}">Ready to create one?</a></p>
                  {% endfor %}
                  {% endif %}
                
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col s12">
                  <div class="card-tabs">
                    <ul class="tabs tabs-fixed-width">
                      <li class="tab"><a class="active hide-on-small-only" href="#saved_recipes">Saved Recipes</a></li>
                      <li class="tab"><a class="hide-on-small-only center" href="#manage_cuisines">Manage Your Cuisines</a></li>
                      <li class="tab"><a class="show-on-small hide-on-med-and-up" href="#manage_cuisines">Your Cuisines</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              <section id="saved_recipes">
              <div class="row">
                <div class="col s12">
                  <h3 class="center">Saved Recipes</h3>
                  {% if user_recipes %}
                    {% for recipe in user_recipes %}
                      <div class="card">
                        <span class="card-title">{{recipe.recipe_name}}</span>
                        <div class="card-content">
                          <p>{{recipe.recipe_name}}</p>
                        </div>
                      </div>
                      {% else %}
                        <p class="center"><b>{{ session['username'] }}, you have no saved recipes.</b></p>
                        <p class="center">To save a recipe click on <a class="btn"><i class="material-icons">thumb_up</i></a> 
                        by the title of a recipe and the recipes you liked will appear in this section.</p>
                    {% endfor %}
                  {% endif %}
                </div>
              </div>
            </section>
              <section id="manage_cuisines">
                <h3 class="center">Manage Your Cuisines</h3>
                <h5 class="center">Cuisines created by you: <b>{{user_cuisine_count}}</b></h5>
                {% if user_cuisines %}
                {% for cuisine in user_cuisines %}
                      <div class="card">
                        <span class="card-title">{{cuisine.cuisine_type}}</span>
                        <div class="card-content">
                          <p>{{cuisine.cuisine_type}}</p>
                        </div>
                      </div>
                      {% else %}
                        <p class="center"><b>{{ session['username'] }}, you have not created any cuisines.</b></p>
                        <p class="center">To create a new cuisine click on </p><div class="center"><a href="{{url_for('add_cuisine')}}" class="btn">Or Add a new cuisine</a></div>
                        <p class="center">under the Add a Recipe tab.</p>
                  {% endfor %}
                  {% endif %}
              </section>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}